---
layout: post
author: SamirTalwar
authorname: Samir Talwar
title: Global Day of Coderetreat An Account from London
preview: Here’s what you do. On Saturday morning, at ridiculous o’clock (i.e. around 8), you walk into a room which has a delicious breakfast all laid out. There are some people running about shouting at each other about “sessions” and “calls”, but you ignore them in favour of the sweet pastries, fresh fruit and hot coffee sitting on the counter. When you’re done, you take out your laptop, and someone with a funny haircut floats over to remind you that you should have a test environment set up for your language(s) of choice.
---
<p>Here&#x2019;s what you do. On Saturday morning, at ridiculous o&#x2019;clock (i.e. around 8), you walk into a room which has a delicious breakfast all laid out. There are some people running about shouting at each other about &#x201C;sessions&#x201D; and &#x201C;calls&#x201D;, but you ignore them in favour of the sweet pastries, fresh fruit and hot coffee sitting on the counter. When you&#x2019;re done, you take out your laptop, and someone with a funny haircut floats over to remind you that you should have a test environment set up for your language(s) of choice.</p>
<p>You mingle for about half an hour. What are you working on, what languages do you use, how enterprisey is it&#x2026; that king of thing. Eventually, that same guy with the funny haircut stands up and talks. He tells you you&#x2019;re going to be working on implementing <a rel="nofollow" href="http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Conway&#x2019;s Game of Life</a>, you&#x2019;re going to be pairing, and you&#x2019;re going to be writing tests. He also tells you that two thousand other people across the globe are, on this day, 3rd December 2011, doing exactly the same thing. Cool, right? You want to get cracking, but suddenly, there&#x2019;s a bunch of Belgians on the projector, waving. A man with long hair says hi, and someone over on your end asks him how the first iteration went. Of course, it&#x2019;s an hour later over there. They seem to have enjoyed it&#x2014;lots of grinning. It&#x2019;s a bit awkward, what with no one knowing each other, but quite fun.</p>
<p>So you find another coder who likes C# and get to work. His name&#x2019;s, oh, I don&#x2019;t know, Fred. Fred&#x2019;s a good name. The room&#x2019;s buzzing as people natter about the closed tube station, the food, the weather and, most importantly, which test they should be writing first. You go for &#x201C;the grid is 100x100&#x201D;. Cells go on a grid, right? Let&#x2019;s start with that.</p>
<p>Code code code code code. You&#x2019;ve been coding for twenty minutes. Not that long in the grand scheme of things, but the man with the funny haircut did mention you only have forty-five. Just then, that same man swings over to stare at your code. He asks why you have a grid. You tell him cells go on a grid. He asks you where in the rules it says that, so you flip over to Wikipedia to have a look.</p>
<ol>
<li>Any live cell with fewer than two live neighbours dies, as if caused by under-population.</li>
<li>Any live cell with two or three live neighbours lives on to the next generation.</li>
<li>Any live cell with more than three live neighbours dies, as if by overcrowding.</li>
<li>Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction.</li>
</ol>
<p>He&#x2019;s right. Kind of. Of course there&#x2019;s a grid. But then he tells you not to worry and shoots off to hassle the next pair, leaving you feeling slightly bemused. You ignore him, and get on with the task.</p>
<p>You hear a ringing sound, and look up to see the funny-haired man tapping the side of his coffee mug very loudly with a spoon. Is it time already? Forty-five minutes goes quick&#x2014;much quicker than you&#x2019;d realised. He&#x2019;s bellowing, &#x201C;DELETE YOUR CODE!&#x201D; You thought that was a joke. You don&#x2019;t want to destroy your hard work, but your pair, who&#x2019;s done this before, assures you it&#x2019;s a good idea. Well, it&#x2019;s not like you got very far anyway. Other people are gathering in the room you&#x2019;re sitting, looking at the funny-haired man expectantly as he begins to talk.</p>
<p>&#x201C;So, how did it go?&#x201D; he asks in his odd accent. You hadn&#x2019;t noticed how odd it was before, but he definitely originates from somewhere else. That also explains the hair. Weirdo. Anyway, back to the question. It went alright, you guess. Got somewhere. Not too much done.</p>
<p>&#x201C;Who managed to implement the first rule?&#x201D; Well, you didn&#x2019;t do that. You barely had enough time to get the grid up and running, let alone the rules. A quick poll shows that about half the room didn&#x2019;t have a grid, just a cell. He reminds you that the point of the exercise is to implement the rules, not a grid. Perhaps you&#x2019;ll focus more on them next time. Just get the bare minimum up before attacking them. Better find a new pair.</p>
<p>&#x201C;This time, you&#x2019;ll focus on <a rel="nofollow" href="http://agile.dzone.com/articles/4-rules-simple-design">the four rules of simple design</a>.&#x201D; He&#x2019;s written them up on the whiteboard, and they&#x2019;re also sitting in <a rel="nofollow" href="https://twitter.com/CoderetreatLdn">the Twitter account</a>. Alright, easy enough. No duplication? That&#x2019;s second nature to you. You find another pair and get to work. This time, you&#x2019;re working in Ruby. You don&#x2019;t know Ruby, but it&#x2019;ll be fun to learn it. This, of course, means you&#x2019;re sitting back and watching a little, and so your pair, Tom, drives the first test: &#x201C;a cell should have neighbours&#x201D;. It looks like this.</p>
<pre>describe &apos;cell&apos; do<br>it &apos;has neighbours&apos; do<br>
    cell = Cell.new<br>
    cell.add_neighbour<br>
    cell.add_neighbour<br>
    cell.neighbours.length.should == 2<br>
  end<br>
end</pre>
<p>You start implementing it. It goes quickly. You&#x2019;re just about to start on the second test, which you get to drive, when you&#x2019;re interrupted by the man who was asking the Belgians questions earlier. Someone asks him where his moustache is. He laughs and tells them Movember&#x2019;s over, and then stares at your code a little. He points at your first test and asks you, &#x201C;does that express every idea we need to express?&#x201D; Of course it does, you previously-moustached man. A cell needs neighbours. You don&#x2019;t answer, but Tom says something to the same effect. The response: &#x201C;But what are those neighbours?&#x201D; Cells, obviously. &#x201C;Where does it say that in your test?&#x201D; Before you can think of a snarky reply about his mother, he&#x2019;s moved onto the next question: &#x201C;Why can you access <code>neighbours</code>? Do you have the minimal amount of methods and fields?&#x201D; Well, no. But you need to test it somehow.</p>
<p>&#x201C;Ask why, not what. Why do we need to know the number of neighbours?&#x201D; So we know whether the cell is dead or not. Right. You swear an oath on your honour to kill him later, sort out your test so it asks the right questions, and fix your code.</p>
<p>The retrospective for this one goes well. People explain how they got to a better design by thinking about expression and intent. People talk about the four game rules as acceptance tests, used to drive behaviour. It dives into a deep discussion about testing and outside-in vs. inside-out before it&#x2019;s cut off. Apparently there&#x2019;s a call at 12:30 with Stockholm and they&#x2019;d like to keep the schedule. Before you can blink, you&#x2019;re onto the next session: <a rel="nofollow" href="http://www.markhneedham.com/blog/2008/11/06/object-calisthenics-first-thoughts/">object calisthenics</a>. Write the best object-oriented code you can. You already know how to write object-oriented code&#x2014;you&#x2019;re an excellent C# developer&#x2014;so this one should be easy.</p>
<p>You start with the test, of course. You&#x2019;re not an animal. You and your new pair, Bob, decide to take the advice from the previous test to heart and type this:</p>
<pre>@Test public void aLiveCellWithFewerThanTwoLiveNeighboursDies() {<br>Cell cell = new Cell(1);<br>
    assertFalse(cell.isAlive());<br>
}</pre>
<p>Wait. <code>isAlive</code> is a getter. It&#x2019;s right there. The last rule. No getters or setters. You talk about it, and neither of you can figure out how to work around this rule. AAARRGGHHHHHHH. Why is writing such a simple test so difficult? You keep talking until that smiling git without a moustache shows up and asks you why you&#x2019;ve got a getter. &#x201C;Because how else do we test it?&#x201D; &#x201C;Tell, don&#x2019;t ask. What does your object <code>do</code>?&#x201D; It lives or dies, duh. &#x201C;No, that&#x2019;s what it <em>is</em>. Its state. What&#x2019;s its behaviour?&#x201D;</p>
<p>You don&#x2019;t know. &#x201C;You should probably figure that out.&#x201D; Eventually, it hits you. You need to show it somehow. So you rewrite your test to have it &#x201C;display&#x201D; the cell to an interface and stub it to assign to a variable. Excellent. Now you can make progress. Or so you think, until the funny-haired man starts banging his spoon against his coffee mug. He&#x2019;s not shouting &#x201C;DELETE YOUR CODE&#x201D;, but everyone else is, chanting in unison as they engage in the destruction of their hard-earned work as if it were a ritual slaughter. It almost is. The discussion for this one is fascinating. Many found the last rule the hardest in this situation, but people were asking about all of them, wondering <em>why</em> you&#x2019;d want to keep your classes to a maximum of two fields. It seems ridiculous. And wrapping <em>all</em> primitives? Wow. You collectively come to the realisation that these are guidelines, not hard and fast rules: you shouldn&#x2019;t be afraid to break them, but you should understand why you&#x2019;re doing so. The funny-haired man talks about how they make you name things, which in turn makes you think about what something actually <em>is</em>. One guy points out how this goes against a lot of ideas about how functional code is supposed to look. He&#x2019;s right, it does. Functional programming and object-oriented programming do often go in two different directions. You knew that, but you&#x2019;d not really seen any evidence before.</p>
<p>Lunch. Lunch is delicious. Simple fare, mostly sandwiches, but tasty. You were hoping that by &#x201C;no pizza&#x201D; they meant &#x201C;roast duck and potatoes&#x201D;, but this will fill the belly. The conversation starts on the morning&#x2019;s work but quickly flies off in all directions. You end up talking about hack days with the only female developer who showed up. Apparently there really is one for everything. You&#x2019;re midway through explaining why you&#x2019;ll never develop for iPhone on principle when someone yells at all of you to get back into the meeting room for an impromptu call with Spain. Of all things. It&#x2019;s slightly mental&#x2014;the Spaniards&#x2019; faces are on a laptop being held up by Sans Moustache rather than the projector, but it&#x2019;s pretty funny and everyone on both ends seems to be enjoying themselves. You&#x2019;re just getting a rapport going when the laptop battery dies and the video cuts out, which just adds to the laughter. You dive out of the room ahead of everybody else to grab the last fish skewer, which you spied just before you were dragged inside.</p>
<p>Session four. You&#x2019;re told you talked too much over lunch, so this time, you&#x2019;re not going to talk to your pair. Exceptions are made for explaining how the languages and IDEs work, but that&#x2019;s it: you must communicate only through your code. The importance of expressive tests are highlighted. You find a pair. You forget to ask his name, but it doesn&#x2019;t matter. He writes the first test. Not what you would have written, but you make it pass anyway. By returning a constant. You write the next test, and make him actually implement the functionality he clearly intended for you to write. He gives you a Look.</p>
<p>That Look gets traded back and forth over the next three-quarters of an hour. Cooperation devolves into competition and you drive the code in two different directions, resulting in a big mess. Not the best outcome. When you hear the coffee mug ringing, it&#x2019;s almost a blessing. You talk good-naturedly about how you would have done things if you could only speak to each other, but inside, you&#x2019;re each plotting the other&#x2019;s demise. After a bit of discussion from other pairs in the retrospective about how surprisingly well it went, this comes out. You&#x2019;re worried for a second&#x2014;have you made a nemesis?&#x2014;but it actually helps a lot to understand what the other guy was thinking. Perhaps you&#x2019;d better not pair again soon though.</p>
<p>You still don&#x2019;t know his name.</p>
<p>Session five. <a rel="nofollow" href="http://gojko.net/2009/02/27/thought-provoking-tdd-exercise-at-the-software-craftsmanship-conference/">TDD as if you meant it.</a>Simple, right? You pair with one of the guys you were talking to over lunch, who introduces himself as Raj. Nice bloke. Won&#x2019;t stop smiling. You write your first test together, naturally trading ideas and the keyboard. It goes well, and you implement a solution together too, making sure to keep the method in the test class like the rules say. You don&#x2019;t see the point of it. Then the man with the funny hair shows up and asks you about the second rule. You show him the implemention in the test class. He says that&#x2019;s not good enough. You need to implement it in the test itself. It doesn&#x2019;t make sense, but you do it anyway. It looks like this:</p>
<pre>[Test]<br>public void ALiveCellWithFewerThanTwoLiveNeighboursDies() {<br>
    var cell = new Cell(Alive);<br>
    cell.State = Dead;<br>
    Assertion.AssertFalse(cell.IsAlive());<br>
}</pre>
<p>Right. Now onto rule 5. &#x201C;Where did <code>Cell</code>come from? That&#x2019;s not TDD.&#x201D; Well, we needed a cell. &#x201C;No you don&#x2019;t. You can do it without the cell.&#x201D; Huh? OK, you get rid of the cell class and replace it with just the state. You&#x2019;re not really testing anything here. &#x201C;Don&#x2019;t worry, you will soon. And by the way, you probably don&#x2019;t need that enum.&#x201D;</p>
<p>So you write another test, grumbling to Raj, who&#x2019;s still smiling. You don&#x2019;t like him so much any more. You write another test to check exactly the opposite. The funny-haired man swings back and says, &#x201C;Good. You&#x2019;ve got some duplication. Now refactor.&#x201D; So you do. And suddenly, after pulling out a method, the test starts to read like a test again.</p>
<p>Talking about this afterwards, it&#x2019;s clear that you can get pretty far without any classes at all. Whether you should is another matter, but it looks like a useful technique. Sans Mo talks about Test-Driven Design instead of Test-Driven Development, but he&#x2019;s really just giving a name to the concepts being thrown out all around the table. It seems like it goes right against the ideas of Object Calisthenics, and this is confirmed by one of the guys standing up: it actually leads to a more functional design.</p>
<p>The final iteration of the day. Finally, some peace: this time, you do what you want. No <del>bastards</del> <ins>facilitators</ins> wandering around and &#x201C;helping&#x201D;. You and your pair, Paulo, decide to just write some tests and see what happens, and you get pretty far. Annoyingly, you both see evidence of the rules cropping up in both your test and your code, especially object calisthenics. Your brain has decided that properties are a bad thing, and you feel a bit of anguish every time you write one. Your tests are angelic in their beauty, and you feel a pang of sadness as the coffee mug rings and your pair gently takes the laptop from you, almost callously hitting the <em>Delete&#xA0;</em>key and vaporising your glorious creation.</p>
<p>You feel a tear running down your cheek, but not from sadness. You&#x2019;ve finally realised that it&#x2019;s not the destination that&#x2019;s important, it&#x2019;s the journey.</p>
<hr><p><em>This is a rather dramatised account of a fictional programmer who attended last Saturday&#x2019;s Global Day of Coderetreat in London. The code and emotions are made up, but the events are real (except in the case of session four, where Olly and I were pretty close to smacking each other&#x2026; though I did know his name). Thanks so much to everyone who came and specifically to <a rel="nofollow" href="https://twitter.com/sandromancuso">Sandro</a> (the funny-haired man), <a rel="nofollow" href="https://twitter.com/ollywickham">Olly</a> and <a rel="nofollow" href="https://twitter.com/marialacher">Maria</a> for running the show and letting <a rel="nofollow" href="https://twitter.com/SamirTalwar">me</a> (the man without a moustache) pretend I was helping. Cheers to <a rel="nofollow" href="https://twitter.com/valtech">Valtech UK</a> for providing us with a great space and delicious food. It was, by all accounts, a great success, and I&#x2019;m looking forward to doing it again soon. And hopefully I&#x2019;ll know what I&#x2019;m doing next time.</em></p>
