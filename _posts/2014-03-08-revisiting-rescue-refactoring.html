---
layout: post
author: curiousagilist
authorname: Bob Allen
title: Revisiting Rescue Refactoring
preview: For our March event we returned to Cyber-Dojo and discovered a very useful feature on Emily Bache's Refactoring Katas on Github. Way down at the bottom of each kata's explanation is a set of links (one for each of several languages) that create a new Cyber-Dojo for that kata. This was a huge help. Thank you Emily once again.  We again stuck to the Tennis scoring and Yahtzee scoring katas for the morning sprints, and moved on to Gilded Rose after lunch.
---
<p><font face="Arial, Helvetica, sans-serif">For our March event we returned to Cyber-Dojo and discovered a very useful feature on&#xA0;<a rel="nofollow" href="https://github.com/emilybache/Refactoring-Katas">Emily Bache&apos;s Refactoring Katas on Github</a>. Way down at the bottom of each kata&apos;s explanation is a set of links (one for&#xA0;</font><font face="Arial, Helvetica, sans-serif">each of several languages)&#xA0;</font><font face="Arial, Helvetica, sans-serif">that create a&#xA0;</font><i>new</i><font face="Arial, Helvetica, sans-serif">&#xA0;Cyber-Dojo for that kata. This was a huge help. Thank you Emily once again. &#xA0;We again stuck to the Tennis scoring and Yahtzee scoring katas for the morning sprints, and moved on to Gilded Rose after lunch.&#xA0;</font></p>
<p><font face="Arial, Helvetica, sans-serif">Because the Gilded Rose kata contains many aspects encountered in real-life, we had some deep conversations, some inspired by watching Jim Weirich do&#xA0;<a rel="nofollow" href="https://www.youtube.com/watch?v=WBJ3hdcM7G8">a masterful Roman Numerals kata</a>. Jim&apos;s elegant teaching style will be missed. The video is highly recommended for illustrating how elegant solutions can emerge from careful application of TDD practices.</font></p>
<p><font face="Arial, Helvetica, sans-serif">Knowing where to start on a large legacy code base got us talking about the &quot;heat map&quot; technique. This is not related to UX eye-tracking but instead focusses on seeing where the largest number of source repo check-ins are occurring.&#xA0;A lot of activity focused on a single module is often for one (</font><font face="Arial, Helvetica, sans-serif">or both)&#xA0;</font><font face="Arial, Helvetica, sans-serif">of two reasons. Either the module that&apos;s getting the most attention is the center of the universe and fails to uphold the&#xA0;</font><a rel="nofollow" href="http://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsibility Principle</a><font face="Arial, Helvetica, sans-serif">, or reported bugs too frequently require changes in that module&apos;s code. Both conditions are code smells that make the module a candidate for refactoring.</font></p>
<p><font face="Arial, Helvetica, sans-serif">So the question of an easy way to identify where your heaviest <span>repo&#xA0;</span>activity is came up. Attendee Steven Coffman worked out a pipeline of shell commands that does a great job of surfacing candidates:</font></p>
<div class="p1"><p><font face="Courier New, Courier, monospace">git log --since=&apos;last month&apos; --pretty=format: --name-only | sort | uniq -c | sort -rg | head -10</font></p>
</div>
<div class="p2"><p><font face="Arial, Helvetica, sans-serif">&#xA0;</font><span style="font-family: Arial, Helvetica, sans-serif; font-size: 13px;">You can replace the &apos;last month&apos; with &apos;1 week ago&apos;, &apos;yesterday&apos;, &apos;1 year ago&apos;, &apos;3 months ago&apos;, &apos;1/20/2009&apos;. Or you can omit the --since=&apos;last month&apos; to have no time limit.</span></p>
</div>
<div class="p1"><p><font face="Arial, Helvetica, sans-serif">Thanks Steve!</font></p>
</div>
