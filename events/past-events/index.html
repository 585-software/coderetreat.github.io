---
layout: default
---

<div id="map" style="float: none; margin-right: auto;margin-left: auto;">
  <div id="popup"></div>
</div>

<form class="pure-form">
    <fieldset>
        <label for="gdcrYear">Select GDCR year:</label>
        <select id="gdcrYear" style="font-family: sans-serif;">
            <option>2013</option>
            <option>2014</option>
            <option>2015</option>
            <option selected>2016</option>
        </select>
    </fieldset>
</form>

<div id="events"></div>

<script>
  $(function() {
    var renderEventTemplate = function(dataJson, template, container) {
      $.get(dataJson, function(events) {
        $.get(template, function(eventTemplate) {
          var html =  $.templates(eventTemplate).render(events);
          $(container).html(html);
        });
      });
    };

    initEventsOnMap('gdcr2016-stripped.json');
    renderEventTemplate('/events/gdcr2016.json', "event.tmpl", "#events");


    $('#gdcrYear').on('change', function(e) {
      var year = e.target.value;
      initEventsOnMap('gdcr'+year+'-stripped.json');
      renderEventTemplate('/events/gdcr'+year+'.json', "event.tmpl", "#events");
    });
  });
</script>
